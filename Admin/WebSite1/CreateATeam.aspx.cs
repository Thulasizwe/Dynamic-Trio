using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;


public partial class CreateATeam : System.Web.UI.Page
{
    private string team_name;
    private string team_captain;
    private string team_zone;
    private int team_ID;
    private SqlConnection sqlCon = new SqlConnection(@"Data Source=localhost;Initial Catalog=Esports;Integrated Security=True");
    public CreateATeam()
    {
        team_name = "";
        team_captain = "";
        team_ID = 0;
        team_zone = "";
    }
    public CreateATeam(string teamZone, int teamID, string teamName, string teamCaptain)
	{
        team_name = teamName;
        team_ID = teamID;
        team_captain = teamCaptain;
        team_zone = teamZone;
	}

    protected void submit(object sender, EventArgs e)
    {
       
        TeamNameError.Visible = false;
        TeamCaptainError.Visible = false;
        TeamZoneError.Visible = false;
       
        if (teamName.Text.Length < 1)
        {
            TeamNameError.Visible = true;
        }
        if (teamCaptain.SelectedIndex == 0)
        {
            TeamCaptainError.Visible = true;
        }
        if (TeamZone.SelectedIndex == 0)
        {
            TeamZoneError.Visible = true;
       }
        if ((teamName.Text.Length > 1) && (teamCaptain.SelectedIndex != 0) && (TeamZone.SelectedIndex != 0))
        {
            SqlCommand sqlCommand = new SqlCommand("INSERT INTO SetupTeams VALUES ('" + teamName.Text + "','" + teamCaptain.SelectedIndex + "','" + TeamZone.SelectedItem + "')",sqlCon);
            sqlCommand.ExecuteNonQuery();
            
            TeamNameError.Visible = false;
            TeamCaptainError.Visible = false;
            TeamZoneError.Visible = false;
            TeamSuccess.Text = "The team " + teamName.Text + " has been created, captain : " + teamCaptain.SelectedItem + " and the team zone selected is " + TeamZone.SelectedItem;
            TeamSuccess.Visible = true;
        }
        
        
        
    }
    public string Team_Name
    {
        get
        {
            return team_name;
        }
        set
        {
            team_name = value;
        }
    }

    public string Team_Zone
    {
        get
        {
            return team_zone;
        }
        set
        {
            team_zone = value;
        }
    }

    public string Team_Captain
    {
        get
        {
            return team_captain;
        }
        set
        {
            team_captain = value;
        }
    }
    public int Team_ID
    {
        get
        {
            return team_ID;
        }
        set
        {
            team_ID = value;
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        sqlCon.Open();
        

    }
}